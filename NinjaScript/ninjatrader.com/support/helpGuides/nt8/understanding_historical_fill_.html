<!DOCTYPE html>
<html>
  
<!-- Mirrored from ninjatrader.com/support/helpGuides/nt8/understanding_historical_fill_.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Jan 2023 19:53:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <title>Operations &gt; Strategy Analyzer &gt; Understanding Historical Fill Processing</title>
    <meta name="generator" content="Help &amp; Manual" />
    <meta name="keywords" content="" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link type="text/css" href="default.css" rel="stylesheet" />
    <link type="text/css" href="custom.css" rel="stylesheet">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="nt_custom.js"></script>
    <style TYPE="text/css" media="screen">
    html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #FFFFFF;
    line-height: 1.15
    }
    
    div#printheader {
    display: none
    }
    #idheader {
    width: 100%;
    height: auto;
    padding: 0;
    margin: 0
    }
    #idcontent {
    position: relative
    }
    #callout-table, #overview-table {
    display: block;
    position: relative;
    top: 0;
    left: 0
    }
    #callout-icon {
    display: block;
    position: absolute;
    top: -11px;
    left: -11px
    }
    #callout-icon-flag {
    display: block;
    position: absolute;
    top: -11px;
    left: -8px
    }
    #callout-table a {
    text-decoration: none;
    color: blue
    }
    #callout-table a:visited {
    text-decoration: none;
    color: blue
    }
    #overview-table a {
    text-decoration: none;
    color: black
    }
    #overview-table a:visited {
    text-decoration: none;
    color: black
    }
    #callout-table a:hover, #overview-table a:hover {
    text-decoration: underline
    }
    #switchtoggles {
    text-align: right;
    padding: 0 5px 0 0;
    font-size: 90%
    }
    p.help-url {
    margin: 20px 0 5px 0;
    text-align: center;
    font-size: 80%;
    text-decoration: none
    }
    .sync-toc {
    color: #ffffff;
    font-size: 8pt;
    font-weight: bold;
    display: none
    }
    .sync-toc a {
    color: #ffffff;
    text-decoration: none;
    font-weight: bold
    }
    .sync-toc a:visited {
    color: #ffffff
    }
    .sync-toc a:hover {
    text-decoration: underline
    }
    .p_ToggleHeading:active {
    box-shadow: 0px 0px 4px #9ecaed
    }                    
    .Needs {
      border-color: #008000 !important;
      background-color: #f3f9f4;
    }
    .Under {
      border-color: #ffcc00 !important;
      background-color: #fffdf6;
    }
    </style>
    <noscript>
    <style type="text/css">
    html, body { overflow: auto; }
    </style>
    </noscript>
    <style type="text/css" media="print">
    span.f_Heading1 { color: black; }
    #idheader, #printheader img { display:none; }
    #printheader { display: block; margin-top: 20px; }
    #idcontent { margin-top: 10px; position:relative }
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="helpman_settings.js"></script>
    <script type="text/javascript" src="helpman_topicinit.js"></script>
    <script type="text/javascript" src="nsh.js"></script>
    
    
    
  
   <script type="text/javascript">
     HMSyncTOC("NT%20HelpGuide%20English.html", "understanding_historical_fill_.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
  <body>
    
    
    
    <div id="printheader"><p class="p_HeadingTopic"><span class="f_HeadingTopic">Understanding Historical Fill Processing</span></p>
</div>
    <div id="idheader">
      <div id="idheaderbg">
        <table style="width:100%;border:none;margin:0px;background:#A41E22" cellspacing="0" cellpadding="0">
          <tr valign="bottom">
            <td align="left" valign="bottom" class="topichead">
              <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="NT%20HelpGuide%20English0d2d.html?understanding_historical_fill_.htm" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
              <p class="crumbs" id="idnav"><b>Navigation:</b>&nbsp;
                
              <a href="operations.html">Operations</a> &gt; <a href="strategy_analyzer.html">Strategy Analyzer</a>&nbsp;&gt;</p>
              <p class="p_HeadingTopic"><span class="f_HeadingTopic">Understanding Historical Fill Processing</span></p>

            </td>
            <td align="right" width="120" valign="middle" class="topichead" id="idnav">
              
              <a href="ai-generate.html"><img name="prev" src="leftArrow.png" border=0 alt="Previous page"></a>
              
              <a href="strategy_analyzer.html"><img name=main src="upArrow.png" border=0 alt="Return to chapter overview"></a>
              <a href="basket_test.html"><img name=next src="rightArrow.png" border=0 alt="Next page"></a>
              
            </td>
          </tr>
        </table>
<!-- PM review header         
        <div id="status" class="" style="margin-bottom: 0px; min-height: 25px;font-size: small; border-bottom: solid 3px;  padding: 5px;">
          <b></b>: <span id="explain"></span>
        </div>
-->        
        <!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
        
        <p id="switchtoggles"><a href="javascript:HMToggleExpandAll(!HMAnyToggleOpen())" title="Click to open/close expanding sections">Show/Hide Hidden Text</a></p>
        
      </div>
    </div>
    
    <div id="idcontent">
      <div id="innerdiv">
        <!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser -->
        <!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->
        
        <!--ZOOMRESTART-->
        <p class="p_Normal">NinjaTrader uses advanced historical fill processing methods and techniques to get the most realistic results possible on historical backtests. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Our Historical Fill Algorithm will run on existing data that you are backtesting and simulate historical orders using the method descibed below in &quot;Understanding the Historical Fill Algorithm&quot;. You can optionally choose to bring in a secondary data series to be used to get more granular fill on orders and is explained in the section &quot;Understanding Order Fill Resolution</p>
<p class="p_ToggleHeading"><img id="UnderstandingTheHistoricalFillAlgorithm_ICON" class="dropdown-toggle-icon" alt="tog_minus" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="tog_minus.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_ToggleHeading"><a class="dropdown-toggle" style="font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;" href="javascript:HMToggle('toggle','UnderstandingTheHistoricalFillAlgorithm','UnderstandingTheHistoricalFillAlgorithm_ICON')">Understanding&nbsp;the&nbsp;Historical&nbsp;Fill&nbsp;Algorithm</a></span></p>
<div id="UnderstandingTheHistoricalFillAlgorithm" class="dropdown-toggle-body" style="text-align: left; line-height: 1.38; padding: 0 0 0 0; margin: 0 0 0 32px;"><table class="Toggle" >
<tr class="Toggle">
<td class="Toggle" style="background-color:#FFFFFF;"><h2 class="p_Heading2"><span class="f_Heading2">Historical Fill Algorithm</span></h2>
<p class="p_Normal">NinjaTrader provides two options to control the granularity of historical order fill processing: Standard and High. The Standard order fill resolution uses an algorithm to break each historical bar into three virtual bars to mimic the movement of price within each bar's timeframe. The virtual bars are created based on the proximity of the Open price to the High and Low prices. This provides more realistic intra-bar fills compared to traditional backtesting algorithms which only use static OHLC values.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><img alt="StrategyAnalyzer_OrderFillProcessing" width="328" height="125" style="margin:0;width:328px;height:125px;border:none" src="strategyanalyzer_orderfillprocessing.png"/></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The Standard setting creates virtual bars according to the following logic:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">When the <span style="font-weight: bold;">Open</span> price of the bar is closer to the <span style="font-weight: bold;">High</span> price than the <span style="font-weight: bold;">Low</span> price:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">1. <span style="font-weight: bold;">Open</span> price to the <span style="font-weight: bold;">High</span> price </p>
<p class="p_Normal">2. <span style="font-weight: bold;">High</span> price to the <span style="font-weight: bold;">Low</span> price</p>
<p class="p_Normal">3. <span style="font-weight: bold;">Low</span> price to the <span style="font-weight: bold;">Close</span> price</p>
<p class="p_Normal"><img alt="StrategyAnalyzer_OFP_OpenCloserToHigh" width="466" height="270" style="margin:0;width:466px;height:270px;border:none" src="strategyanalyzer_ofp_openclosertohigh.png"/></p>
<p class="p_Normal">When the<span style="font-weight: bold;"> Open</span> price of the bar is closer to the <span style="font-weight: bold;">Low</span> price than the <span style="font-weight: bold;">High</span> price:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">1. <span style="font-weight: bold;">Open</span> price to the <span style="font-weight: bold;">Low</span> price </p>
<p class="p_Normal">2. <span style="font-weight: bold;">Low</span> price to the <span style="font-weight: bold;">High</span> price</p>
<p class="p_Normal">3. <span style="font-weight: bold;">High</span> price to the <span style="font-weight: bold;">Close</span> price</p>
<p class="p_Normal"><img alt="StrategyAnalyzer_OFP_openclosertolow" width="466" height="270" style="margin:0;width:466px;height:270px;border:none" src="strategyanalyzer_ofp_openclosertolow.png"/></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<h2 class="p_Heading2"><span class="f_Heading2">Slippage</span></h2>
<p class="p_Normal">Slippage can be added to your order fills to help mimic real market conditions. The value is expressed in &quot;ticks&quot;, the minimum value of fluctuation for an instrument, and is only applied to market, stop-market and Market-if-touched orders. NinjaTrader will add the slippage to each order however you cannot have more slippage then the high/low price of the next bar. </p>
</td>
</tr>
</table>
</div>
<p class="p_ToggleHeading"><img id="UnderstandingOrderFillResolution_ICON" class="dropdown-toggle-icon" alt="tog_minus" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="tog_minus.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_ToggleHeading"><a class="dropdown-toggle" style="font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;" href="javascript:HMToggle('toggle','UnderstandingOrderFillResolution','UnderstandingOrderFillResolution_ICON')">Understanding&nbsp;order&nbsp;fill&nbsp;resolution</a></span></p>
<div id="UnderstandingOrderFillResolution" class="dropdown-toggle-body" style="text-align: left; line-height: 1.38; padding: 0 0 0 0; margin: 0 0 0 32px;"><table class="Toggle" >
<tr class="Toggle">
<td class="Toggle" style="background-color:#FFFFFF;"><h2 class="p_Heading2"><span class="f_Heading2">Order Fill Resolution</span></h2>
<p class="p_Normal">NinjaTrader allows you to pull in additional historical data that will be more granular than what you are using for the strategy backtest to be used to give you more data points of which to fill orders. Allowing for more accuracy in the order fill simulation. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><img alt="StrategyAnalyzer_OrderFillProcessing" width="328" height="125" style="margin:0;width:328px;height:125px;border:none" src="strategyanalyzer_orderfillprocessing.png"/></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Order fill resolution</span> of &quot;<span style="font-weight: bold;">Standard (Fastest)</span>&quot; is the default setting and will use the existing bar type and interval that you are running the backtest on to fill your orders. This means that the historical fill algorithm will use the same Open, High, Low, Close, Time values that are available to the strategy for running the order fill simulation. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Selecting <span style="font-weight: bold;">order fill resolution</span> of &quot;<span style="font-weight: bold;">High</span>&quot; will allow you to set a secondary bar series to be used as the price data to fill your orders, this allows you to bring in more granular data then you are currently running the strategy on. For example you may have a strategy that you run on &quot;<span style="font-weight: bold;">Daily</span>&quot; bars but then want to bring in &quot;<span style="font-weight: bold;">Minute</span>&quot; bars for the <span style="font-weight: bold;">historical fill algorithm </span>to be based on. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The secondary bar series will mimic the 'price based on' setting in your Strategy Analyzer settings, should you wish to mix different prices types, for example generate signals of last based data and execute those to a bid / ask series, this could be achieved with further <a href="using_historical_bid_ask_serie.html" class="topiclink">custom programming</a>. </p>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0; line-height: 1.38; padding: 0 0 0 0; margin: 0 0 0 0;"><table class="Note" >
<tr class="Note">
<td class="Note"><p class="p_Normal"><span style="font-weight: bold;">Notes</span>: </p>
<p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span>You could choose to always use the most granular <span style="font-weight: bold;">order fill resolution</span> such as a &nbsp;1 Tick Data Series<span style="font-weight: bold;">.</span> However this forces NinjaTrader to process this additional data for use in the <span style="font-weight: bold;">historical fill algorithm</span>. This results in longer backtest times due to the additional data that needs to be processed. NinjaTrader will only start the backtest after we have loaded historical data for both the strategy and the order fill resolution. </p><p class="p_Normal" style="text-indent: 0; padding-left: 13px; margin-left: 0;"><span class="f_Normal" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span style="font-weight: bold;">Order fill resolution</span> cannot be used with Multi Time Frame/Multi Instrument strategies, or when Tick Replay is used. For those cases, a strategy should be written to <a href="backtesting_ninjascript_strate.html" class="topiclink">submit orders to a single tick data series.</a></p></td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>

        <!--ZOOMSTOP-->
      </div>
      <script type="text/javascript">
      
      var lastSlashPos = document.URL.lastIndexOf("https://ninjatrader.com/") > document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("https://ninjatrader.com/") : document.URL.lastIndexOf("\\");
      if (document.URL.substring(lastSlashPos + 1, lastSlashPos + 4).toLowerCase() != "~hh") {
      if (document.all) setTimeout(function() {
      nsrInit();
      }, 20);
      else nsrInit();
      }
      
      
      if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) {
      $('.sync-toc').show();
      $('p.crumbs').hide();
      }
      
      
      </script>
      <div id="bump" style="height: 25px"></div>
    <script type="text/javascript">
HMInitToggle('UnderstandingTheHistoricalFillAlgorithm_ICON','hm.type','dropdown','hm.state','0','hm.src0','tog_plus.gif','hm.src1','tog_minus.gif','onclick','HMToggle(\'toggle\',\'UnderstandingTheHistoricalFillAlgorithm\',\'UnderstandingTheHistoricalFillAlgorithm_ICON\')');
HMInitToggle('UnderstandingTheHistoricalFillAlgorithm','hm.type','dropdown','hm.state','0');
HMInitToggle('UnderstandingOrderFillResolution_ICON','hm.type','dropdown','hm.state','0','hm.src0','tog_plus.gif','hm.src1','tog_minus.gif','onclick','HMToggle(\'toggle\',\'UnderstandingOrderFillResolution\',\'UnderstandingOrderFillResolution_ICON\')');
HMInitToggle('UnderstandingOrderFillResolution','hm.type','dropdown','hm.state','0');
</script>
</body>
  
<!-- Mirrored from ninjatrader.com/support/helpGuides/nt8/understanding_historical_fill_.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Jan 2023 19:53:15 GMT -->
</html>
